<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>まちあわ!!| 自分の居場所をリンクで共有できるサイト。</title>
    <meta name="description" content="ディスクリプション" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Ehor｜Github" />
    <meta property="og:site_name" content="まちあわ!!" />
    <meta property="og:description" content="自分の居場所をリンクで共有できるサイト。Javascriptのみで実行されているため、
    こちら側からは情報を見ることはできません。必要なときだけ、友達に送れば住所がばれることがありません。" />
    <meta name="robots" content="noarchive">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
</head>

<body>
    <section class="hero is-primary">
        <div class="hero-body">
            <p class="title">
                まちあわ!!【リンクを作る】
            </p>
            <p class="subtitle">
                自分の居場所をリンクで共有できるサイト。
            </p>
        </div>
    </section>
    <div class="notification">
        このサイトでは、<b>”個人情報の収集”</b>などの<b>「プライバシーに欠ける行為」</b>を一切行っておりません。<br>
        これらの処理はサーバーで管理しておらず、<br>
        Javascriptを使用した、<b>「端末側での処理」</b>を行っています。
        万が一、このアプリを使用して、<b>弊害が起きた場合、一切責任を取りません。ご了承下さい。</b>
    </div>
    <div class="box">
        <nav class="level is-mobile">
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">緯度</p>
                    <p class="title" id="ido">取得中....</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">経度</p>
                    <p class="title" id="keido">取得中...</p>
                </div>
            </div>
        </nav>
    </div>
    <div class="box">
        <input class="input is-primary" id="link" type="text" placeholder="位置情報が正しく取得できると、ここに共有リンクが表示されます。">
        <div id="display">
            <button class="button is-primary onclick" onclick="copy()">リンクをコピー</button>
            <button class="button"><a id="map" href="" target="_blank">GoogleMapで確認する!!</a></button>

        </div>
    </div>
</body>

</html>

<script>
    let ido = document.getElementById("ido");
    let keido = document.getElementById("keido");
    let map = document.getElementById("map");
    navigator.geolocation.getCurrentPosition((position) => {
        let coords = position.coords;
        ido.textContent = coords.latitude;
        keido.textContent = coords.longitude;
        map.setAttribute("href", "https://www.google.co.jp/maps/@" + coords.latitude + "," + coords.longitude + ",19z");
        var url = location.protocol + "//" + location.host + "/main.html" + "?ido=" + coords.latitude + "&keido=" + coords.longitude;
        document.getElementById("link").value = url;
        document.getElementById("display").style.display = "block";

    });
    function copy() {
        var input_copy = document.getElementById("link");
        input_copy.select();
        document.execCommand("Copy");
    }
</script>
<style>
    #display {
        display: none;
    }

    .center {
        text-align: center;
        margin: 0 auto;
    }

    html {
        padding: 10pt;
    }

    b {
        color: rgb(218, 52, 52);
        background-color: rgb(255, 230, 162);
        padding-left: 4pt;
        padding-right: 4pt;
    }

    .box button {
        margin: 5pt;
    }
</style>
